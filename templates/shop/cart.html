{% extends 'shop/base.html' %}
{% block content %}

<div class="max-w-3xl mx-auto mt-10 px-4">

  <!-- Page Title -->
  <h1 class="text-3xl font-bold text-yellow-700 mb-6 border-b pb-3">
    ðŸ›’ Your Shopping Cart
  </h1>

  {% if items %}
  <div class="space-y-4">

    {% for item in items %}
    <div class="bg-white p-5 rounded-lg shadow-md border border-yellow-200 flex items-center gap-4">

      <!-- PRODUCT IMAGE -->
      <div>
        <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"
          class="w-24 h-24 rounded-lg object-cover shadow-md border">
      </div>

      <!-- PRODUCT DETAILS -->
      <div class="flex-1">
        <div class="text-xl font-semibold text-gray-800">{{ item.product.name }}</div>
        <div class="text-yellow-700 font-bold text-lg">â‚¹{{ item.product.price }}</div>
      </div>

      <!-- ACTION BUTTONS -->
      <div class="text-right">

        <!-- Update Quantity -->
    <form method="post" action="{% url 'shop:update_cart_quantity' item.pk %}" 
      class="flex items-center space-x-2">
  {% csrf_token %}
  
  <input type="number" name="quantity" value="{{ item.quantity }}" min="1"
    class="border border-yellow-400 rounded-lg p-1 w-20 text-center focus:ring-yellow-500 focus:border-yellow-600">

  <button type="submit"
    class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-1 rounded-lg text-sm shadow">
    Update
  </button>
</form>

        <!-- Remove -->
        <form method="post" action="{% url 'shop:remove_from_cart' item.pk %}" class="mt-2">
          {% csrf_token %}
          <button class="text-red-600 hover:text-red-700 font-semibold text-sm">
            Remove
          </button>
        </form>

      </div>

    </div>
    {% endfor %}

  </div>

  <!-- TOTAL SECTION -->
  <div class="mt-6 bg-white shadow-md border border-yellow-200 p-5 rounded-lg">
    <div class="flex justify-between items-center">
      <span class="text-xl font-bold text-gray-800">Total:</span>
      <span class="text-green-600 font-bold text-2xl">â‚¹{{ total }}</span>
    </div>

    <a href="{% url 'shop:checkout' %}"
      class="block text-center bg-yellow-600 hover:bg-yellow-700 text-white font-semibold py-3 rounded-lg mt-4 shadow transition-all">
      Proceed to Checkout â†’
    </a>
  </div>

  {% else %}
  <!-- EMPTY CART -->
  <div class="text-center mt-20">
    <img src="https://cdn-icons-png.flaticon.com/512/2038/2038854.png" class="w-28 mx-auto opacity-70">
    <h2 class="text-2xl font-bold text-gray-700 mt-4">Your Cart is Empty</h2>
    <a href="{% url 'shop:index' %}"
      class="mt-4 inline-block bg-yellow-600 hover:bg-yellow-700 text-white px-5 py-2 rounded-lg shadow">
      Continue Shopping
    </a>
  </div>
  {% endif %}

</div>

{% endblock %}
